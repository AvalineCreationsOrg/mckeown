<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McKeown Innovation System</title>
    <style>
        :root { --green: #00ff41; --bg: #000; --win-bg: #0a0a0a; --border: #333; }
        body, html { background: var(--bg); color: var(--green); font-family: 'Courier New', monospace; margin: 0; height: 100vh; overflow: hidden; }
        
        /* Terminal Layout */
        #terminal { padding: 20px; height: 100%; overflow-y: auto; box-sizing: border-box; scroll-behavior: smooth; }
        #history { white-space: pre-wrap; line-height: 1.4; }
        .input-line { display: flex; align-items: center; margin-top: 10px; }
        input { background: transparent; border: none; color: var(--green); font-family: inherit; font-size: 1rem; outline: none; flex: 1; }

        /* Pop-out Portal Window */
        #portal-window {
            position: absolute; top: 15%; left: 15%; width: 70%; height: 60%;
            background: var(--win-bg); border: 1px solid var(--border);
            display: none; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.8); z-index: 1000;
        }
        .win-header { background: #1a1a1a; padding: 10px; display: flex; justify-content: space-between; cursor: move; border-bottom: 1px solid var(--border); user-select: none; }
        .win-controls { display: flex; gap: 10px; }
        .win-dot { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .close { background: #ff5f56; } .max { background: #27c93f; }
        .win-content { padding: 25px; overflow-y: auto; color: #fff; }
        .full-screen { width: 100% !important; height: 100% !important; top: 0 !important; left: 0 !important; }
    </style>
</head>
<body>

<div id="terminal">
    <div id="history">Welcome to the mckeown innovation system portfolio and portal.<br>Please fire a command to proceed (Syntax: mckeown fire [command]):</div>
    <div class="input-line">
        <span id="prompt-label">&gt;&nbsp;</span>
        <input type="text" id="cmd-input" autofocus spellcheck="false" autocomplete="off">
    </div>
</div>

<div id="portal-window">
    <div class="win-header" id="drag-handle">
        <div class="win-controls">
            <div class="win-dot close" onclick="closePortal()"></div>
            <div class="win-dot max" onclick="maxPortal()"></div>
        </div>
        <div style="font-size: 12px; color: #666;">McKeown_Innovation_Portal.exe</div>
    </div>
    <div class="win-content">
        <h2 style="color: var(--green);">Welcome to the McKeown Innovation Portal</h2>
        <p style="color: var(--green); opacity: 0.7;">[ Portfolio Content Active ]</p>
        <div id="portal-data-display">
            <ul style="color: var(--green); list-style: none; padding-left: 0;">
                <li><b>• Project Alpha:</b> System integration complete.</li>
                <li><b>• System Status:</b> Optimal.</li>
            </ul>
        </div>
    </div>
</div>

<script>
    const input = document.getElementById('cmd-input');
    const history = document.getElementById('history');
    const win = document.getElementById('portal-window');
    const promptLabel = document.getElementById('prompt-label');
    
    let isWaitingForPassword = false;

    const myInfo = {
        contacts: "Email: tylerdavidmckeown@icloud.com\nPhone: 07533312418",
        projects: "1. Terminal Portfolio UI\n2. Innovation System v1.0",
        bio: "Age: 15\nStatus: Lead Developer"
    };

    input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const rawVal = input.value.trim();
            const val = rawVal.toLowerCase();

            // Handle Password Input
            if (isWaitingForPassword) {
                if (rawVal === "#Mckeown97214") {
                    history.innerHTML += `<br>Password Accepted. Initializing GUI...`;
                    setTimeout(() => { win.style.display = 'flex'; }, 400);
                    isWaitingForPassword = false;
                    promptLabel.innerHTML = "&gt;&nbsp;";
                    input.type = "text";
                } else {
                    history.innerHTML += `<br><span style="color: #ff5f56;">Incorrect Password. Login Terminated.</span>`;
                    isWaitingForPassword = false;
                    promptLabel.innerHTML = "&gt;&nbsp;";
                    input.type = "text";
                }
                input.value = '';
                return;
            }

            history.innerHTML += `<br><span style="color: #666;">&gt; ${rawVal}</span>`;

            if (val.startsWith('mckeown fire ')) {
                const subCmd = val.replace('mckeown fire ', '');

                if (subCmd === 'login') {
                    history.innerHTML += `<br>System Request: Enter Password for Administrator Access.`;
                    isWaitingForPassword = true;
                    promptLabel.innerHTML = "Password:&nbsp;";
                    input.type = "password"; // Hide password dots while typing
                } 
                else if (subCmd === 'attach') {
                    history.innerHTML += `<br>Binding console to popup... Control established.`;
                    win.style.display = 'flex';
                    win.classList.add('full-screen');
                }
                else if (subCmd.startsWith('pullinfo ')) {
                    const infoType = subCmd.replace('pullinfo ', '');
                    if (myInfo[infoType]) {
                        history.innerHTML += `<br>Retrieving [${infoType}]...<br>${myInfo[infoType]}`;
                    } else {
                        history.innerHTML += `<br>Error: Data stream '${infoType}' not found.`;
                    }
                }
                else if (subCmd === 'dir' || subCmd === 'ls') {
                    history.innerHTML += `<br>Directory: McKeown_Innovation_Portal.exe, bio.txt, config.sys`;
                }
                else if (subCmd === 'clear') {
                    history.innerHTML = "System buffer cleared.";
                }
                else {
                    history.innerHTML += `<br>Error: Command '${subCmd}' unknown.`;
                }
            } else {
                history.innerHTML += `<br><span style="color: #ff5f56;">Access Denied. Command must start with 'mckeown fire'.</span>`;
            }

            input.value = '';
            document.getElementById('terminal').scrollTop = document.getElementById('terminal').scrollHeight;
        }
    });

    function closePortal() { win.style.display = 'none'; win.classList.remove('full-screen'); }
    function maxPortal() { win.classList.toggle('full-screen'); }

    // Drag Logic
    let isDragging = false; let offset = [0,0];
    const handle = document.getElementById('drag-handle');
    handle.onmousedown = (e) => { isDragging = true; offset = [win.offsetLeft - e.clientX, win.offsetTop - e.clientY]; };
    document.onmousemove = (e) => { if (isDragging) { win.style.left = (e.clientX + offset[0]) + 'px'; win.style.top = (e.clientY + offset[1]) + 'px'; } };
    document.onmouseup = () => { isDragging = false; };
    document.onclick = (e) => { if(e.target.tagName !== 'INPUT') input.focus(); };
</script>
</body>
</html>
